<!DOCTYPE html>
<html>
  <body>
    <canvas id="canvas" width="60" height="22">
      Your browser does not support the HTML5 canvas tag.
    </canvas>
  </body>

  <script type="text/javascript">
    const { ipcRenderer } = require('electron');

    ipcRenderer.on('genImg', (event, arg) => {
      if (arg) {
        generateInfoImg(arg);
      }
    });

    let canvas = document.getElementById('canvas');
    let dpr = window.devicePixelRatio || 1;
    let ctx = canvas.getContext('2d');

    function generateInfoImg(content) {
      let width = 50;
      let height = 22;

      ctx.font = '10px';
      let sWidth = ctx.measureText(content.symbol.replace('USDT', '')).width;
      let pWidth = ctx.measureText(content.price).width;
      width = sWidth > pWidth ? sWidth : pWidth;
      canvas.width = width * dpr;
      canvas.height = height * dpr;
      ctx.scale(dpr, dpr);

      ctx.clearRect(0, 0, width, height);
      ctx.fillStyle = 'rgba(255, 255, 255, 0)';
      ctx.fillRect(0, 0, width, height);
      ctx.fillStyle = '#FFF';
      ctx.font = '10px';
      ctx.fillText(content.symbol.replace('USDT', ''), 0, height / 2 - 1);
      ctx.fillText(content.price, 0, height - 1);
      let dataImg = canvas.toDataURL('image/png');
      ipcRenderer.send('showImg', dataImg, content, width, height);
    }
  </script>
</html>
